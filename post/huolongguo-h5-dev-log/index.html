<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>火龙果H5开发平台开发日志 | xingdou&#39;s blog</title>
<meta name="description" content="一个程序员的博客">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="shortcut icon" href="http://zhongxingdou.github.io/blog//favicon.ico">
<link rel="stylesheet" href="http://zhongxingdou.github.io/blog//styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="http://zhongxingdou.github.io/blog/">
        <img src="http://zhongxingdou.github.io/blog//images/avatar.png" class="site-logo">
        <h1 class="site-title">xingdou&#39;s blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="site-description">
      一个程序员的博客
    </div>
    <div class="site-footer">
      版权归博主所有，转载请联系付费！
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">火龙果H5开发平台开发日志</h2>
            <div class="post-date">2020-04-11</div>
            
            <div class="post-content">
              <h2 id="2020-2-1-~-2020-2-5">2020-2-1 ~ 2020-2-5</h2>
<ol>
<li>引入 vitejs 构建服务</li>
<li>因 vitejs 不支持 pug 模板，将 pug 模板转成 HTML</li>
<li>引入 prettier 并格式化代码</li>
<li>因 vitejs 使用的 rollup 不支持 require.context，取消动态路由加载，改为手动引入。https://github.com/elcarim5efil/rollup-plugin-require-context 插件可支持</li>
<li>引入 tailwind</li>
</ol>
<h2 id="2020-1-25-~-2021-1-29">2020-1-25 ~ 2021-1-29</h2>
<ol>
<li>实现 siteStore 及其 state 与 schema 编辑</li>
<li>实现 special 专题及其页面管理，当前编辑页面切换</li>
</ol>
<h2 id="2021-1-18-~-2021-1-22">2021-1-18 ~ 2021-1-22</h2>
<ol>
<li>实现变量组件用于模拟简单数组和对象数组： array-controller，配置插件 value-schema-editor。</li>
</ol>
<h2 id="2021-1-11-~-2021-1-13">2021-1-11 ~ 2021-1-13</h2>
<ol>
<li>实现组件的 iterator 绑定</li>
<li>实现组件的 attribute, props 数据绑定，并可绑定到组件或上级组件的 iterator 数据</li>
</ol>
<h2 id="2021-1-2-~-2021-1-8">2021-1-2 ~ 2021-1-8</h2>
<ol>
<li>重构 store 的 editor 模块，分成三个子模块（editor, editingPage, editingCompTree），避免代码过长</li>
<li>配置弹出层组件 vant popup，增加配置项 layoutMode.forceData，优先级高于用户配置</li>
<li>实现特性：选择组件后，如组件不可见，自动滚动到可见</li>
<li>实现特性：选择不可见组件后（如从组件树中选择 select 的 option），将<strong>浮动操作工具条</strong>显示到<strong>父组件</strong>位置</li>
</ol>
<h2 id="2020-12-28-~-2020-12-31">2020-12-28 ~ 2020-12-31</h2>
<ol>
<li>重构组件布局渲染 ComponentRender</li>
<li>编辑器：实现 popup 类型的编辑插件<br>
<img src="http://zhongxingdou.github.io/blog//post-images/1609238708122.png" alt="" loading="lazy"></li>
<li>实现配置限制子组件类型的组件</li>
<li>编辑器：实现导航树<img src="http://zhongxingdou.github.io/blog//post-images/1609466732633.png" alt="" loading="lazy"></li>
</ol>
<h2 id="2020-12-21-~-2020-12-25">2020-12-21 ~ 2020-12-25</h2>
<ol>
<li>编辑器：实现 hover 组件时在上方显示组件名<img src="http://zhongxingdou.github.io/blog//post-images/1609238718393.png" alt="" loading="lazy"></li>
<li>编辑器：实现组件浮动操作工具条<img src="http://zhongxingdou.github.io/blog//post-images/1609238646800.png" alt="" loading="lazy"></li>
<li>编辑器：编辑插件分类为 inplace 插件，重新设计 editMode 配置</li>
<li>调整 logo 样式与导航链接<br>
<img src="http://zhongxingdou.github.io/blog//post-images/1609238631306.png" alt="" loading="lazy"></li>
</ol>
<h2 id="2020-12-14-~-2020-12-18">2020-12-14 ~ 2020-12-18</h2>
<ol>
<li>退出编辑时重设页面相关 state</li>
<li>修复自定义 ORM 模型字段时共用默认值</li>
<li>实现组件库样式变量配置</li>
</ol>
<h2 id="2020-12-07-~-2020-12-12">2020-12-07 ~ 2020-12-12</h2>
<ol>
<li>插件增加 “isGeneral” 字段表是否通用字段</li>
<li>编辑器使用 grid 布局</li>
<li>实现组件库用于加载与设置相同库的组件</li>
<li>实现页面配置：SEO、颜色、展示 ID 与名称</li>
<li>部署到阿里云（邓景瑞的服务器）</li>
<li>重构登陆：使用 passport 代替 jsonwebtoken，支持第三方 github 登陆</li>
</ol>
<h2 id="2020-11-30-~-2020-12-04">2020-11-30 ~ 2020-12-04</h2>
<ol>
<li>删除组件同步到后台，删除前确认</li>
<li>页面列表：添加编辑布局链接</li>
<li>修复编辑组件子节点时编辑组件clone在滚动时定位不准问题</li>
<li>加载页面组件后恢复布局模式时的组件自定义样式</li>
<li>调整编辑器布局列的布局样式（中间手机位置）</li>
<li>调整编辑器布局当前选中组件样式（从outline到模拟四边框）</li>
<li>编辑器编辑子节点mask和clone的定位实现</li>
<li>修复恢复组件自定义样式不成功（应该在页面组件完全恢复到store后再恢复）</li>
</ol>
<h2 id="2020-11-23-~-2020-11-27">2020-11-23 ~ 2020-11-27</h2>
<ol>
<li>实现保存添加的组件、自动保存根组件</li>
<li>实现加载页面组件并恢复 state 和布局编辑</li>
<li>实现修改当前选中组件后自动保存</li>
</ol>
<h2 id="2020-11-16-~-2020-11-20">2020-11-16 ~ 2020-11-20</h2>
<ol>
<li>优化编辑器组件筛选</li>
<li>将 huolongguo 项目拆分为 hlg-client 和 hlg-service</li>
<li>实现编辑插件管理后台</li>
<li>实现动态加载编辑插件</li>
<li>修复编辑组件刚进入编辑状态又立即退出编辑（未clone data.on导致退出编辑事件处理器始终存在）</li>
<li>未进入预览时不渲染预览组件，但继续向预览 shadowDOM 添加样式</li>
<li>重构编辑模式（配置与实现）</li>
</ol>
<h2 id="2020-11-9-~-2020-11-13">2020-11-9 ~ 2020-11-13</h2>
<ol>
<li>为得势编写企业微信机器人</li>
<li>修复组件编辑内部样式相关问题</li>
</ol>
<h2 id="2020-11-1-~-2020-11-4">2020-11-1 ~ 2020-11-4</h2>
<ol>
<li>动态加载 Vue 组件 css</li>
<li>在后台重新配置测试组件并通保存到数据库</li>
<li>重构组件编辑模式实现</li>
<li>调整组件配置部分结构</li>
<li>动态加载 Vue 组件 css 中的字体</li>
</ol>
<h2 id="2020-10-25-~-2020-10-30">2020-10-25 ~ 2020-10-30</h2>
<ol>
<li>编辑器实现预览模式</li>
<li>全面更新编辑器外观<img src="http://zhongxingdou.github.io/blog//post-images/1603976311375.png" alt="" loading="lazy"></li>
<li>从数据库加载组件分类与组件</li>
<li>动态加载 Vue 组件 js 并注册组件</li>
</ol>
<h2 id="2020-10-9-~-2010-10-22">2020-10-9 ~ 2010-10-22</h2>
<ol>
<li>开发事件绑定UI组件：支持绑定数据，支持设置属性<br>
<img src="http://zhongxingdou.github.io/blog//post-images/1603194116435.png" alt="" loading="lazy"><br>
<img src="http://zhongxingdou.github.io/blog//post-images/1603194181353.png" alt="" loading="lazy"></li>
</ol>
<h2 id="2020-10-1-~-2020-10-8">2020-10-1 ~ 2020-10-8</h2>
<p>国庆与中秋假期</p>
<h2 id="2020-9-21-~-2020-9-30">2020-9-21 ~ 2020-9-30</h2>
<ol>
<li>开发 techsea-cloud-web</li>
</ol>
<h2 id="2020-9-14-~-2020-9-19">2020-9-14 ~ 2020-9-19</h2>
<ol>
<li>部署 techsea-cloud-api techsea-cloud-admin 到腾讯云服务器</li>
<li>开发事件绑定UI组件</li>
</ol>
<h2 id="2020-9-11">2020-9-11</h2>
<ol>
<li>制作介绍商业模式的PPT</li>
</ol>
<h2 id="2020-9-5-~-2020-9-10">2020-9-5 ~ 2020-9-10</h2>
<ol>
<li>实现编辑组件内部元素的样式<img src="http://zhongxingdou.github.io/blog//post-images/1599481921754.png" alt="" loading="lazy"></li>
</ol>
<h2 id="2020-9-1-~-2020-9-4">2020-9-1 ~ 2020-9-4</h2>
<ol>
<li>学习JavaScript 验证库 Joi https://joi.dev/  并在 Hapi 项目中 使用</li>
<li>重构 techsea-cloud-api router, plugin, settings</li>
<li>开始实现组件微调（子元素属性样式编辑）：clone 编辑中的组件放入指定容器中，并将其位置与原组件重叠</li>
</ol>
<h2 id="2020-8-31">2020-8-31</h2>
<ol>
<li>修复 【装配编辑器】wrap 组件捕获模式无法阻止链接组件点击，改为按 Shift 鍵响应组件原有行为（原是 Alt 鍵，但它浏览器点链接默认行为是下载，Shift 则是新窗口打开）</li>
</ol>
<h2 id="2020-8-18-~-2020-8-30">2020-8-18 ~ 2020-8-30</h2>
<ol>
<li>学习 Prisma2 的使用，包括 Studio Migration 及 generate</li>
<li>学习 Hapi 的使用</li>
<li>学习 ElementAdmin 的使用</li>
<li>使用上述技术开发得势网站项目  techsea-cloud-admin 与 techsea-cloud-api</li>
</ol>
<h2 id="2020-8-17">2020-8-17</h2>
<ol>
<li>实现主题色功能<img src="http://zhongxingdou.github.io/blog//post-images/1597666045350.png" alt="" loading="lazy"></li>
</ol>
<h2 id="2020-8-12~2020-8-13">2020-8-12~2020-8-13</h2>
<ol>
<li>H5制作平台-拼搭（项目介绍文档，技术为主，在系统的备忘录中）</li>
<li>H5制作平台-拼搭 https://www.processon.com/view/link/5f34d9a6f346fb60b6c9c11a（脑图，平台服务为主）</li>
</ol>
<h2 id="2020-8-10-~-2020-8-14">2020-8-10 ~ 2020-8-14</h2>
<ol>
<li>实现组件 props 配置与 attrs 配置</li>
<li>实现组件样式配置插件化（初版）</li>
<li>修复 RUI bug</li>
</ol>
<h2 id="2020-7-27-~-2020-8-6">2020-7-27 ~ 2020-8-6</h2>
<ol>
<li>RUI 第一版开发完成（计15天）</li>
</ol>
<h2 id="2020-7-20-~-2020-7-24">2020-7-20 ~ 2020-7-24</h2>
<ol>
<li>了解并使用 aws 服务，安装 AWS CLI，EB CLI，了解 AWS IAM
<ul>
<li>弹性容器-Elastic Beanstalk</li>
<li>非关系型数据库-dynamoDB</li>
<li>Serverless - Lambda</li>
<li>安全服务 - IAM（用户-组-角色-权限策略）</li>
</ul>
</li>
<li>帮得势开发抽奖程序<br>
<img src="http://zhongxingdou.github.io/blog//post-images/1595410438717.png" alt="" loading="lazy"></li>
</ol>
<h2 id="2020-7-7-~-2020-7-17">2020-7-7 ~ 2020-7-17</h2>
<ol>
<li>开发 RUI —— 根据 JSONSchema 来生成界面的库</li>
</ol>
<h2 id="2020-6-28-~-2020-7-6">2020-6-28 ~ 2020-7-6</h2>
<ol>
<li>开发 Safari 浏览器插件 PageQRCode</li>
</ol>
<h2 id="2020-6-22-~-2020-6-24">2020-6-22 ~ 2020-6-24</h2>
<ol>
<li>【装配编辑器】优化样式隔离，</li>
<li>【装配编辑器】实现向配置的 slots 添加或拖入组件</li>
<li>【装配编辑器】初步实现编辑模式，通过p标签的contenteditable验证</li>
</ol>
<h2 id="2020-6-19">2020-6-19</h2>
<ol>
<li>【装配编辑器】实现“手机”即被装配的页面的样式与编辑器的样式隔离</li>
</ol>
<h2 id="2020-6-15-~-2020-6-18">2020-6-15 ~ 2020-6-18</h2>
<ol>
<li>【装配编辑器】实现给“容器组件”加入用于选中插入点的“占位组件”</li>
<li>【装配编辑器】去除外部库依赖，重新实现页面组件嵌套拖动</li>
<li>【装配编辑器】实现删除页面组件</li>
</ol>
<h2 id="2020-6-10-~-2020-6-12">2020-6-10 ~ 2020-6-12</h2>
<ol>
<li>开始开发【装配编辑器】，实现基本布局和基本交互</li>
<li>【装配编辑器】支持页面组件拖动调整顺序，选择高亮</li>
<li>【装配编辑器】实现第一个配置组件：字体属性配置</li>
<li>美化首页，Admin 导航栏</li>
<li>技术调研：尝试在流动布局中实现图文混排，动态在图片覆盖的位置加空白字符 https://jsbin.com/yucucoc/23/edit?html,css,js,output</li>
</ol>
<h2 id="2020-6-8-~-2020-6-9">2020-6-8 ~ 2020-6-9</h2>
<ol>
<li>学习 svelte，可以生成 web component，代码量极小</li>
<li>开始开发组件编辑器：基本布局，简单组件列表展示，点击组件添加到布局舞台并渲染成功</li>
<li>学习 snowpack，尝试使用它代替 webpack，失败</li>
</ol>
<h2 id="2020-6-3-~-2020-6-6">2020-6-3 ~ 2020-6-6</h2>
<ol>
<li>运维：在阿里云成功部署之前开发cwebp镜像到 serverless kuberneters 服务</li>
<li>todo：进一步了解 bit.dev，暂时认为不是很合适作为组件管理与发布工具</li>
<li>todo：京东 Taro 可以编译 React 到包括  Web 在内的多个平台，可考虑使用它作为代码生成器，component json tree -&gt; react -&gt; Taro compile -&gt; multiple platform</li>
<li>todo：了解 virtual-css 相关库，如何动态改变 css 但性能良好，是否可像 virtual-dom 那样 diff 变化并应用到 cssom？</li>
<li>了解 “凡科-轻站小程序与微传单”，UI交互不错，但是性能比较慢。</li>
<li>绘制基本架构图<img src="http://zhongxingdou.github.io/blog//post-images/1591701802084.jpeg" alt="" loading="lazy"></li>
</ol>
<h2 id="2020-6-1-~-2020-6-2">2020-6-1 ~ 2020-6-2</h2>
<ol>
<li>组织管理列表页：显示管理员</li>
<li>实现用户选择通用组件，输入用户名自动完成</li>
<li>重构 store：分模块，声明类型</li>
<li>收集h5制作平台界面图片及了解交互与功能，包括：兔展、易企秀、秀米</li>
</ol>
<h2 id="2020-5-30-~-2020-5-31">2020-5-30 ~ 2020-5-31</h2>
<ol>
<li>学习使用 minikube，kubectl，成功在本地环境部署了 zhongxingdou/cwebp 应用</li>
<li>购买阿里云 serverless kuberneter 服务，未成功部署</li>
</ol>
<h2 id="2020-5-21-~-2020-5-28-6-workday">2020-5-21 ~ 2020-5-28 6 workday</h2>
<ol>
<li>学习 state machine 库 xstate</li>
<li>实现 vue3 有而 vue-composition 没有的 unref, RefValue</li>
<li>使用 xstate 重新实现组织管理</li>
</ol>
<h2 id="2020-5-18-~-2020-5-20">2020-5-18 ~ 2020-5-20</h2>
<ol>
<li>迁移更多类型声明往 type.ts</li>
<li>实现 util.catchPromise，相关类型声明费了不少时间</li>
<li>实现用户列表页</li>
<li>实现团队成员列表页</li>
</ol>
<h2 id="2020-5-14-~-2020-5-15">2020-5-14 ~ 2020-5-15</h2>
<ol>
<li>实现团队（Organization）</li>
<li>实现通用布局组件 ListLayout</li>
<li>登陆优化：支持在密码输入框按“enter”键登陆</li>
</ol>
<h2 id="2020-5-12-~-2020-5-13">2020-5-12 ~ 2020-5-13</h2>
<ol>
<li>使用 Vue compostion API 和模板语言 pug 重构组件管理</li>
<li>抽取出公共 Vue hooks：列表页搜索、翻页与刷新逻辑，支持新建与编辑的表单对话框逻辑</li>
</ol>
<h2 id="2020-5-11">2020-5-11</h2>
<ol>
<li>完成组件管理：包括组件编辑、删除、组件版本新建、删除、修改，以及组件版本在表单页的切换</li>
</ol>
<h2 id="2020-5-9">2020-5-9</h2>
<ol>
<li>完善组件分类</li>
<li>新增组件，组件列表 80%</li>
</ol>
<h2 id="2020-5-8">2020-5-8</h2>
<ol>
<li>service 实现上传与下载文件</li>
<li>实现组件分类管理</li>
</ol>
<h2 id="2020-5-6">2020-5-6</h2>
<ol>
<li>Page 列表页实现编辑与删除，添加创建者列</li>
<li>添加 Element 对 Vue 的扩展的 TypeScript 类型声明</li>
<li>学习 TypeScript 范型相关，为了声明对现存库的扩展</li>
<li>学习 Sequelize belongsTo 关联以及关联后的查询输出</li>
</ol>
<h2 id="2020-4-30">2020-4-30</h2>
<ol>
<li>实现了 Page 列表页</li>
<li>统一包装 service 返回结果</li>
<li>开始在 TechSEA 上班</li>
</ol>
<h2 id="2020-4-29">2020-4-29</h2>
<p>联系了上海前同事，进行了全面介绍，答应后续帮助推广，并赞同方向</p>
<h2 id="2020-4-27">2020-4-27</h2>
<p>支持本地 sqlite3 数据库与本地 nodejs 服务，docker 服务太费笔记本电池</p>
<h2 id="2020-4-24">2020-4-24</h2>
<ol>
<li>实现 PageService</li>
<li>实现 ComponentService</li>
</ol>
<h2 id="2020-4-22">2020-4-22</h2>
<p>实现自动生成 VueRouter 路由</p>
<h2 id="2020-4-20">2020-4-20</h2>
<p>加了后台菜单</p>
<h2 id="2020-4-17">2020-4-17</h2>
<p>实现注册界面</p>
<h2 id="2020-4-12">2020-4-12</h2>
<p>实现登陆界面</p>
<h2 id="2020-4-7">2020-4-7</h2>
<p>实现用户验证服务</p>
<ul>
<li>json-web-token, jsonwebsocket</li>
<li>koa-session</li>
</ul>
<h2 id="2020-3-22">2020-3-22</h2>
<p>开发环境搭建</p>
<ul>
<li>Koa 2</li>
<li>Mysql, Sequelize</li>
<li>Vuejs, Vue CLI</li>
</ul>

            </div>
            
              <div class="tag-container">
                
                  <a href="http://zhongxingdou.github.io/blog/tag/WgaRLZR8b/" class="tag">
                    huolongguo
                  </a>
                
                  <a href="http://zhongxingdou.github.io/blog/tag/QgKZo4-ScA/" class="tag">
                    h5
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="http://zhongxingdou.github.io/blog/post/about/">
                  <h3 class="post-title">
                    关于
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
